---
---

# TypeScript

## satisfies å…³é”®å­—

> TypeScript 4.9 æ¨å‡º

**åŠŸèƒ½ï¼š** æ–°çš„`satisfies`è¿ç®—ç¬¦è®©æˆ‘ä»¬å¯ä»¥éªŒè¯è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…æŸç§ç±»å‹ï¼ŒåŒæ—¶ä¸æ”¹å˜è¡¨è¾¾å¼è‡ªèº«çš„ç±»å‹ã€‚

æ²¡æœ‰`satisfies`å…³é”®å­—ä¹‹å‰ï¼Œæˆ‘ä»¬å¯èƒ½å†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š

- ä¾‹å­ 1ï¼š

```ts
type Colors = 'red' | 'green' | 'blue';

type RGB = [red: number, green: number, blue: number];

const palette: Record<Colors, string | RGB> = {
  red: [255, 0, 0],
  green: '#00ff00',
  bleu: [0, 0, 255],
  // ~~~~ èƒ½å¤Ÿæ£€æµ‹åˆ°æ‹¼å†™é”™è¯¯
};

// ğŸŸ¡ æ„æƒ³ä¸åˆ°çš„é”™è¯¯ - 'palette.red' å¯èƒ½ä¸º string
const redComponent = palette.red.at(0);
```

è¿™ç§å†™æ³•å¯ä»¥ç›‘æµ‹å‡º`palette`ä¹¦å†™çš„æ—¶å€™ï¼Œç¼ºå°‘çš„ç±»å‹æˆ–è€…å¤šä½™çš„ç±»å‹ä¼šè¿›è¡Œ`ts`çš„æŠ¥é”™æç¤ºã€‚
ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨`palette.red`çš„æ—¶å€™ï¼Œred çš„ç±»å‹ä¼šå˜æˆ`string | RGB`ï¼Œä¹Ÿå°±æ˜¯`palette`æœ¬èº«çš„çš„ç±»å‹æ¨æ–­ä¸¢å¤±äº†ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªå±æ€§çš„ç±»å‹ä¹Ÿè¢«æ”¾å¤§äº†ã€‚
é‡åˆ°è¿™æ ·çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨`(palette.red as RGB)`æ¥å¼ºè¡Œç¼©å°ç±»å‹ï¼Œä½†æ˜¯**ä¸ä¼˜é›…ï¼Œä¸æ™ºèƒ½**ã€‚

- ä¾‹å­ 2ï¼š

```ts
type Colors = 'red' | 'green' | 'blue';

type RGB = [red: number, green: number, blue: number];

const palette = {} as Record<Colors, string | RGB>;

// ğŸ”´ no Error
const redComponent = palette.red; // (property) red: string | RGB
```

è¿™ç§å†™æ³•å¯èƒ½åœ¨è§£å†³ä¸€äº›ç±»å‹çš„æƒ…å†µä¸‹ï¼Œç”¨çš„äººå¾ˆå¤šã€‚ä½†æ˜¯è¿™ç§å†™æ³•éå¸¸çš„**ä½çº§**ï¼Œéå¸¸ä¸æ¨èã€‚
è¿™æ ·çš„å†™æ³•ä¼šè®© ts çš„ç±»å‹æ£€æµ‹å¤±å»æ„ä¹‰ï¼šæœ¬æ¥`palette`å¯¹è±¡ä¸­æ²¡æœ‰`red`å±æ€§ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§å†™æ³•ï¼Œä¼šé€šè¿‡`ts`çš„æ ¡éªŒï¼Œå‡è£…æœ‰`red`å±æ€§ï¼Œå¯¼è‡´ååºçš„ä¸€äº›ä»£ç åˆ¤æ–­å¯èƒ½ä¹Ÿä¼šå‡ºç°é€»è¾‘ä¸Šçš„é”™è¯¯ã€‚

### ä¼˜é›…è§£å†³åŠæ³•

> åœ¨ `satisfies` å…³é”®å­—å‡ºæ¥ä»¥å‰ï¼Œå¯èƒ½æœ€å¤šçš„è§£å†³åŠæ³•å°±æ˜¯ä¾‹å­ 1 ä¸­çš„åŠæ³•æˆ–è€…å†™ä¸€ä¸ªç±»å‹ä¿æŠ¤å‡½æ•°è¿›è¡Œåˆ¤æ–­ã€‚
> ç°åœ¨ä½¿ç”¨ `satisfies` å…³é”®å­—çš„ä¼˜é›…è§£å†³åŠæ³•å¦‚ä¸‹ï¼š

```ts
type Colors = 'red' | 'green' | 'blue';

type RGB = [red: number, green: number, blue: number];

const palette = {
  red: [255, 0, 0],
  green: '#00ff00',
  blue: [0, 0, 255],
} satisfies Record<Colors, string | RGB>;

// âœ…ä¾ç„¶å¯ä»¥è®¿é—®è¿™äº›æ–¹æ³•ï¼Œå› ä¸ºä¼šè‡ªåŠ¨éªŒè¯è¡¨è¾¾å¼(palette.red)æ˜¯å¦æ»¡è¶³æŸä¸ªç±»å‹
const redComponent = palette.red.map;
const greenNormalized = palette.green.toUpperCase();
```

### åº”ç”¨åœºæ™¯

- ç”¨äºå¯¹è±¡çš„`key`å’Œ`value`çš„å€¼æœ‰å¤šä¸ªçš„æƒ…å†µï¼Œä½†æ˜¯å´æ²¡æœ‰å¯¹è¿™ä¸ªå¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§è¿›è¡Œç±»å‹çš„å®šä¹‰ã€‚
  - å¦‚æœå¯¹å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§çš„ç±»å‹éƒ½è¿›è¡Œå®šä¹‰äº†ï¼Œé‚£è¿˜æ˜¯ä½¿ç”¨ä¾‹å­1çš„æ–¹å¼æ–¹ä¾¿ä¸€ç‚¹ã€‚
  - åŒæ—¶ï¼Œå¦‚æœä½¿ç”¨ç±»å‹å®šä¹‰å’Œè¿™ä¸ªå…³é”®å­—ä¸€èµ·ä½¿ç”¨çš„è¯ï¼Œä¼šæŒ‰ç…§ç±»å‹å®šä¹‰æ¥ä½œä¸ºæœ€åçš„ç»“æœã€‚
  - æ‰€ä»¥ï¼šè¿™ä¸ªå…³é”®å­—åº”ç”¨åœ¨å¯¹è±¡å­—é¢é‡çš„åœºæ™¯ä¸Šæ¯”è¾ƒåˆç†ã€‚
